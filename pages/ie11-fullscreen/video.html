<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>
  <h1>test..</h1>
  
  <div id="myel" style="background: red; width: 27em; height: 27em; cursor:pointer;"></div>
  
  <br/>
  <button id="clearLog">clear log</button>
  <div id="log"></div>
  
  <script>
    // to be able to access the myel from the top window
    var myel = top.myel = document.getElementById("myel");
    
    $("#clearLog").click(function() {
      $("#log").empty();
    });
    
    $("#myel").click(function() {
      isFullscreen() ? exitFullscreen() : enterFullScreen(this);
    });
    
    var log = function(m) {
       $("#log").append($("<p />").html(m));  
    };
    
    var iFramed = function() {
      return window.location !== window.parent.location;
    }
    
    var isFullscreen = function () {
      return !!(document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement);
    };
    
    var getFullscreenElement = function () {
      return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement;
    };
    
    var enterFullScreen = function (el) {
      el = el || document.body;
      if (el.requestFullscreen) {
        el.requestFullscreen();
      } else if (el.msRequestFullscreen) {
        el.msRequestFullscreen();
      } else if (el.mozRequestFullScreen) {
        el.mozRequestFullScreen();
      } else if (el.webkitRequestFullscreen) {
        el.webkitRequestFullscreen();
      } else {
        console.log("Fullscreen API is not supported");
      } 
     };
    
    var exitFullscreen = function () {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else if (document.webkitCancelFullScreen) {
        document.webkitCancelFullScreen();
      } 
      inFullScreen = false;
    }

    var onFullscreenChange = function() {
        if (isFullscreen()) {
          
          // just in case we're measuring too quickly?
          setTimeout(function() {
            log("iFramed:" + iFramed() + ", isFullscreen:true, el.width=" + $(top.myel).width());
          }, 1000);
          
        } else {
          log("iFramed:" + iFramed() + ", isFullscreen:false, el.width=" + $(top.myel).width());     
        }
    };
    
    $(document.documentElement).on('fullscreenchange webkitfullscreenchange', onFullscreenChange);
    $(document).on('mozfullscreenchange MSFullscreenChange', onFullscreenChange);

</script>
</body>
</html>
